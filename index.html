<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HorseOS</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:monospace;background:#008080;overflow:hidden;height:100vh}
        .desktop{width:100%;height:100%;position:relative}
        .icon{position:absolute;width:80px;text-align:center;color:#fff;cursor:pointer}
        .icon:hover{background:rgba(0,0,128,.3)}
        .icon-horse{top:20px;left:20px}
        .icon-calc{top:20px;left:120px}
        .icon-mine{top:120px;left:20px}
        .window{position:absolute;background:#c0c0c0;border:2px solid;border-color:#fff #808080 #808080 #fff;display:none}
        .title{background:linear-gradient(90deg,#000080,#1084d0);color:#fff;padding:4px;display:flex;justify-content:space-between}
        .content{padding:10px}
        .horse-win{width:400px;top:50%;left:50%;transform:translate(-50%,-50%)}
        .horse-text{text-align:center;font-size:20px;margin:20px}
        .timer{font-size:30px;color:#000080;margin:20px}
        button{padding:10px 20px;margin:5px;cursor:pointer}
        .calc-win{width:220px;top:100px;left:100px}
        .calc-display{background:#fff;border:2px inset #808080;padding:10px;font-size:24px;text-align:right;margin-bottom:10px}
        .calc-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:5px}
        .calc-grid button{padding:15px;font-size:18px}
        .mine-win{width:250px;top:150px;left:150px}
        .mine-grid{display:grid;grid-template-columns:repeat(8,25px);gap:1px;background:#808080;padding:2px}
        .mine-cell{width:25px;height:25px;background:#c0c0c0;border:2px solid;border-color:#fff #000 #000 #fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:bold}
        .mine-cell.revealed{border:1px solid #808080;background:#c0c0c0;cursor:default}
        .taskbar{position:fixed;bottom:0;left:0;right:0;height:30px;background:#c0c0c0;border-top:2px solid #fff;display:flex;align-items:center;padding:2px}
        .start-btn{padding:4px 10px;font-weight:bold;cursor:pointer}
        .clock{margin-left:auto;padding:4px 10px;border:2px inset #c0c0c0}
    </style>
</head>
<body>
    <div class="desktop">
        <!-- Icons -->
        <div class="icon icon-horse" onclick="showWindow('horseWindow')">
            <div style="font-size:40px">üê¥</div>
            <div>Horse Moment</div>
        </div>
        <div class="icon icon-calc" onclick="showWindow('calcWindow')">
            <div style="font-size:40px">üßÆ</div>
            <div>Calculator</div>
        </div>
        <div class="icon icon-mine" onclick="showWindow('mineWindow');initMine()">
            <div style="font-size:40px">üí£</div>
            <div>Minesweeper</div>
        </div>

        <!-- Horse Window -->
        <div class="window horse-win" id="horseWindow" style="display:block">
            <div class="title">
                <span>üê¥ Scheduled_Horse_Moment.exe</span>
                <button id="horseCloseBtn" onclick="alert('‚ö†Ô∏è You cannot close this. Contemplation is mandatory.')" style="cursor:not-allowed;opacity:0.5">√ó</button>
            </div>
            <div class="content">
                <div class="horse-text">
                    <p>Please stand by for a scheduled Horse Moment.</p>
                    <p>You will now contemplate and reflect.</p>
                    <p style="color:#800000;font-weight:bold">This is a time of seriousness.</p>
                    <p style="font-size:12px">You cannot change this in settings.</p>
                </div>
                <div class="timer" id="horseTimer">60</div>
                <div style="text-align:center">
                    <button onclick="startHorse()" id="horseBtn">I am Contemplating</button>
                </div>
            </div>
        </div>

        <!-- Calculator Window -->
        <div class="window calc-win" id="calcWindow">
            <div class="title">
                <span>üßÆ Calculator</span>
                <button onclick="hideWindow('calcWindow')">√ó</button>
            </div>
            <div class="content">
                <div class="calc-display" id="calcDisp">0</div>
                <div class="calc-grid">
                    <button onclick="calc('C')">C</button>
                    <button onclick="calc('/')">/</button>
                    <button onclick="calc('*')">√ó</button>
                    <button onclick="calc('‚å´')">‚å´</button>
                    <button onclick="calc('7')">7</button>
                    <button onclick="calc('8')">8</button>
                    <button onclick="calc('9')">9</button>
                    <button onclick="calc('-')">-</button>
                    <button onclick="calc('4')">4</button>
                    <button onclick="calc('5')">5</button>
                    <button onclick="calc('6')">6</button>
                    <button onclick="calc('+')">+</button>
                    <button onclick="calc('1')">1</button>
                    <button onclick="calc('2')">2</button>
                    <button onclick="calc('3')">3</button>
                    <button onclick="calc('=')" style="grid-row:span 2">=</button>
                    <button onclick="calc('0')" style="grid-column:span 2">0</button>
                    <button onclick="calc('.')">.</button>
                </div>
            </div>
        </div>

        <!-- Minesweeper Window -->
        <div class="window mine-win" id="mineWindow">
            <div class="title">
                <span>üí£ Minesweeper</span>
                <button onclick="hideWindow('mineWindow')">√ó</button>
            </div>
            <div class="content">
                <div style="text-align:center;margin-bottom:10px">
                    <button onclick="initMine()">üòä New Game</button>
                </div>
                <div class="mine-grid" id="mineGrid"></div>
            </div>
        </div>

        <!-- Taskbar -->
        <div class="taskbar">
            <button class="start-btn" onclick="alert('üê¥ HorseOS v1.0\n\nScheduled Horse Moments for Digital Wellness')">üê¥ Start</button>
            <div class="clock" id="clock">--:--</div>
        </div>
    </div>

    <script>
        // Clock
        function updateClock() {
            const now = new Date();
            const h = now.getHours() % 12 || 12;
            const m = now.getMinutes().toString().padStart(2, '0');
            document.getElementById('clock').textContent = h + ':' + m;
        }
        setInterval(updateClock, 1000);
        updateClock();

        // Window management
        function showWindow(id) {
            document.getElementById(id).style.display = 'block';
        }
        function hideWindow(id) {
            document.getElementById(id).style.display = 'none';
        }

        // Horse Moment - AUTO START
        let horseInterval;
        let horseTime = 60;
        let horseStarted = false;
        
        function startHorse() {
            if (horseStarted) return;
            horseStarted = true;
            
            document.getElementById('horseBtn').disabled = true;
            document.getElementById('horseBtn').textContent = 'Contemplating...';
            document.getElementById('horseCloseBtn').style.opacity = '0.3';
            
            horseInterval = setInterval(() => {
                horseTime--;
                document.getElementById('horseTimer').textContent = horseTime;
                if (horseTime <= 0) {
                    clearInterval(horseInterval);
                    document.getElementById('horseTimer').innerHTML = '<span style="color:green">‚úì Complete!</span>';
                    document.getElementById('horseBtn').textContent = 'Contemplation Complete';
                    document.getElementById('horseBtn').disabled = false;
                    document.getElementById('horseBtn').onclick = closeAndResetHorse;
                    document.getElementById('horseBtn').textContent = 'Click to Return to Desktop';
                    document.getElementById('horseCloseBtn').style.opacity = '1';
                    document.getElementById('horseCloseBtn').onclick = closeAndResetHorse;
                }
            }, 1000);
        }
        
        function closeAndResetHorse() {
            hideWindow('horseWindow');
            // Reset for next time
            horseTime = 60;
            horseStarted = false;
            document.getElementById('horseTimer').textContent = '60';
            document.getElementById('horseBtn').textContent = 'I am Contemplating';
            document.getElementById('horseBtn').disabled = false;
            document.getElementById('horseBtn').onclick = startHorse;
            document.getElementById('horseCloseBtn').style.opacity = '0.5';
            document.getElementById('horseCloseBtn').onclick = function() {
                alert('‚ö†Ô∏è You cannot close this. Contemplation is mandatory.');
            };
        }
        
        // Auto-open horse moment on load (after 1 second)
        setTimeout(() => {
            document.getElementById('horseWindow').style.display = 'block';
        }, 1000);

        // Calculator
        let calcVal = '0', calcPrev = null, calcOp = null, calcNew = true;
        function calc(btn) {
            if (btn >= '0' && btn <= '9') {
                if (calcNew) { calcVal = btn; calcNew = false; }
                else calcVal = calcVal === '0' ? btn : calcVal + btn;
            } else if (btn === 'C') {
                calcVal = '0'; calcPrev = null; calcOp = null; calcNew = true;
            } else if (btn === '‚å´') {
                calcVal = calcVal.length > 1 ? calcVal.slice(0, -1) : '0';
            } else if (btn === '.') {
                if (!calcVal.includes('.')) calcVal += '.';
            } else if (btn === '=') {
                if (calcOp && calcPrev !== null) {
                    const cur = parseFloat(calcVal);
                    switch(calcOp) {
                        case '+': calcVal = (calcPrev + cur).toString(); break;
                        case '-': calcVal = (calcPrev - cur).toString(); break;
                        case '*': calcVal = (calcPrev * cur).toString(); break;
                        case '/': calcVal = cur !== 0 ? (calcPrev / cur).toString() : 'Error'; break;
                    }
                    calcOp = null; calcPrev = null; calcNew = true;
                }
            } else {
                calcPrev = parseFloat(calcVal);
                calcOp = btn;
                calcNew = true;
            }
            document.getElementById('calcDisp').textContent = calcVal;
        }

        // Minesweeper
        function initMine() {
            const grid = document.getElementById('mineGrid');
            grid.innerHTML = '';
            for (let i = 0; i < 64; i++) {
                const cell = document.createElement('div');
                cell.className = 'mine-cell';
                cell.onclick = function() {
                    this.classList.add('revealed');
                    this.textContent = Math.random() > 0.85 ? 'üí£' : '';
                };
                grid.appendChild(cell);
            }
        }

        console.log('üê¥ HorseOS loaded successfully!');
    </script>
</body>
</html>